unit uuMapaMesas;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, uu_modelo_Vazio, StdCtrls, Buttons, ExtCtrls,ibquery;

type
  TfrmMapaMesas = class(Tfrm_modelo_vazio)
    Panel1: TPanel;
    pnMesas: TPanel;
    Button1: TScrollBox;
    mesa1: TBitBtn;
    mesa2: TBitBtn;
    mesa3: TBitBtn;
    mesa4: TBitBtn;
    mesa5: TBitBtn;
    mesa6: TBitBtn;
    mesa7: TBitBtn;
    mesa8: TBitBtn;
    mesa9: TBitBtn;
    mesa10: TBitBtn;
    mesa11: TBitBtn;
    mesa12: TBitBtn;
    mesa13: TBitBtn;
    mesa14: TBitBtn;
    mesa15: TBitBtn;
    mesa16: TBitBtn;
    mesa17: TBitBtn;
    mesa18: TBitBtn;
    mesa19: TBitBtn;
    mesa20: TBitBtn;
    mesa21: TBitBtn;
    mesa22: TBitBtn;
    mesa23: TBitBtn;
    mesa24: TBitBtn;
    mesa25: TBitBtn;
    mesa26: TBitBtn;
    mesa27: TBitBtn;
    mesa28: TBitBtn;
    mesa29: TBitBtn;
    mesa30: TBitBtn;
    mesa31: TBitBtn;
    mesa32: TBitBtn;
    mesa33: TBitBtn;
    mesa34: TBitBtn;
    mesa35: TBitBtn;
    mesa36: TBitBtn;
    mesa37: TBitBtn;
    mesa38: TBitBtn;
    mesa39: TBitBtn;
    mesa40: TBitBtn;
    mesa41: TBitBtn;
    mesa42: TBitBtn;
    mesa43: TBitBtn;
    mesa44: TBitBtn;
    mesa45: TBitBtn;
    mesa46: TBitBtn;
    mesa47: TBitBtn;
    mesa48: TBitBtn;
    mesa49: TBitBtn;
    mesa50: TBitBtn;
    mesa51: TBitBtn;
    mesa52: TBitBtn;
    mesa53: TBitBtn;
    mesa54: TBitBtn;
    mesa55: TBitBtn;
    mesa56: TBitBtn;
    mesa57: TBitBtn;
    mesa58: TBitBtn;
    mesa59: TBitBtn;
    mesa60: TBitBtn;
    mesa61: TBitBtn;
    mesa62: TBitBtn;
    mesa63: TBitBtn;
    mesa64: TBitBtn;
    mesa65: TBitBtn;
    mesa66: TBitBtn;
    mesa67: TBitBtn;
    mesa68: TBitBtn;
    mesa69: TBitBtn;
    mesa70: TBitBtn;
    mesa71: TBitBtn;
    mesa72: TBitBtn;
    mesa73: TBitBtn;
    mesa74: TBitBtn;
    mesa75: TBitBtn;
    mesa76: TBitBtn;
    mesa77: TBitBtn;
    mesa78: TBitBtn;
    mesa79: TBitBtn;
    mesa80: TBitBtn;
    mesa81: TBitBtn;
    mesa82: TBitBtn;
    mesa83: TBitBtn;
    mesa84: TBitBtn;
    mesa85: TBitBtn;
    mesa86: TBitBtn;
    mesa87: TBitBtn;
    mesa88: TBitBtn;
    mesa89: TBitBtn;
    mesa90: TBitBtn;
    mesa91: TBitBtn;
    mesa92: TBitBtn;
    mesa93: TBitBtn;
    mesa94: TBitBtn;
    mesa95: TBitBtn;
    mesa96: TBitBtn;
    mesa97: TBitBtn;
    mesa98: TBitBtn;
    mesa99: TBitBtn;
    mesa100: TBitBtn;
    mesa101: TBitBtn;
    mesa102: TBitBtn;
    mesa103: TBitBtn;
    mesa104: TBitBtn;
    mesa105: TBitBtn;
    mesa106: TBitBtn;
    mesa107: TBitBtn;
    mesa108: TBitBtn;
    mesa109: TBitBtn;
    mesa110: TBitBtn;
    mesa111: TBitBtn;
    mesa112: TBitBtn;
    mesa113: TBitBtn;
    mesa114: TBitBtn;
    mesa115: TBitBtn;
    mesa116: TBitBtn;
    mesa117: TBitBtn;
    mesa118: TBitBtn;
    mesa119: TBitBtn;
    mesa120: TBitBtn;
    mesa121: TBitBtn;
    mesa122: TBitBtn;
    mesa123: TBitBtn;
    mesa124: TBitBtn;
    mesa125: TBitBtn;
    mesa126: TBitBtn;
    mesa127: TBitBtn;
    mesa128: TBitBtn;
    mesa129: TBitBtn;
    mesa130: TBitBtn;
    mesa131: TBitBtn;
    mesa132: TBitBtn;
    mesa133: TBitBtn;
    mesa134: TBitBtn;
    mesa135: TBitBtn;
    mesa136: TBitBtn;
    mesa137: TBitBtn;
    mesa138: TBitBtn;
    mesa139: TBitBtn;
    mesa140: TBitBtn;
    mesa141: TBitBtn;
    mesa142: TBitBtn;
    mesa143: TBitBtn;
    mesa144: TBitBtn;
    mesa145: TBitBtn;
    mesa146: TBitBtn;
    mesa147: TBitBtn;
    mesa148: TBitBtn;
    mesa149: TBitBtn;
    mesa150: TBitBtn;
    mesa151: TBitBtn;
    mesa152: TBitBtn;
    mesa153: TBitBtn;
    mesa154: TBitBtn;
    mesa155: TBitBtn;
    mesa156: TBitBtn;
    mesa157: TBitBtn;
    mesa158: TBitBtn;
    mesa159: TBitBtn;
    mesa160: TBitBtn;
    mesa161: TBitBtn;
    mesa162: TBitBtn;
    mesa163: TBitBtn;
    mesa164: TBitBtn;
    mesa165: TBitBtn;
    mesa166: TBitBtn;
    mesa167: TBitBtn;
    mesa168: TBitBtn;
    mesa169: TBitBtn;
    mesa170: TBitBtn;
    mesa171: TBitBtn;
    mesa172: TBitBtn;
    mesa173: TBitBtn;
    mesa174: TBitBtn;
    mesa175: TBitBtn;
    mesa176: TBitBtn;
    mesa177: TBitBtn;
    mesa178: TBitBtn;
    mesa179: TBitBtn;
    mesa180: TBitBtn;
    mesa181: TBitBtn;
    mesa182: TBitBtn;
    mesa183: TBitBtn;
    mesa184: TBitBtn;
    mesa185: TBitBtn;
    mesa186: TBitBtn;
    mesa187: TBitBtn;
    mesa188: TBitBtn;
    mesa189: TBitBtn;
    mesa190: TBitBtn;
    mesa191: TBitBtn;
    mesa192: TBitBtn;
    mesa193: TBitBtn;
    mesa194: TBitBtn;
    mesa195: TBitBtn;
    mesa196: TBitBtn;
    mesa197: TBitBtn;
    mesa198: TBitBtn;
    mesa199: TBitBtn;
    mesa200: TBitBtn;
    mesa201: TBitBtn;
    mesa202: TBitBtn;
    mesa203: TBitBtn;
    mesa204: TBitBtn;
    mesa205: TBitBtn;
    mesa206: TBitBtn;
    mesa207: TBitBtn;
    mesa208: TBitBtn;
    mesa209: TBitBtn;
    mesa210: TBitBtn;
    mesa211: TBitBtn;
    mesa212: TBitBtn;
    mesa213: TBitBtn;
    mesa214: TBitBtn;
    mesa215: TBitBtn;
    mesa216: TBitBtn;
    mesa217: TBitBtn;
    mesa218: TBitBtn;
    mesa219: TBitBtn;
    mesa220: TBitBtn;
    mesa221: TBitBtn;
    mesa222: TBitBtn;
    mesa223: TBitBtn;
    mesa224: TBitBtn;
    mesa225: TBitBtn;
    mesa226: TBitBtn;
    mesa227: TBitBtn;
    mesa228: TBitBtn;
    mesa229: TBitBtn;
    mesa230: TBitBtn;
    mesa231: TBitBtn;
    mesa232: TBitBtn;
    mesa233: TBitBtn;
    mesa234: TBitBtn;
    mesa235: TBitBtn;
    mesa236: TBitBtn;
    mesa237: TBitBtn;
    mesa238: TBitBtn;
    mesa239: TBitBtn;
    mesa240: TBitBtn;
    mesa241: TBitBtn;
    mesa242: TBitBtn;
    mesa243: TBitBtn;
    mesa244: TBitBtn;
    mesa245: TBitBtn;
    mesa246: TBitBtn;
    mesa247: TBitBtn;
    mesa248: TBitBtn;
    mesa249: TBitBtn;
    mesa250: TBitBtn;
    mesa251: TBitBtn;
    mesa252: TBitBtn;
    mesa253: TBitBtn;
    mesa254: TBitBtn;
    mesa255: TBitBtn;
    mesa256: TBitBtn;
    mesa257: TBitBtn;
    mesa258: TBitBtn;
    mesa259: TBitBtn;
    mesa260: TBitBtn;
    mesa261: TBitBtn;
    mesa262: TBitBtn;
    mesa263: TBitBtn;
    mesa264: TBitBtn;
    mesa265: TBitBtn;
    mesa266: TBitBtn;
    mesa267: TBitBtn;
    mesa268: TBitBtn;
    mesa269: TBitBtn;
    mesa270: TBitBtn;
    mesa271: TBitBtn;
    mesa272: TBitBtn;
    mesa273: TBitBtn;
    mesa274: TBitBtn;
    mesa275: TBitBtn;
    mesa276: TBitBtn;
    mesa277: TBitBtn;
    mesa278: TBitBtn;
    mesa279: TBitBtn;
    mesa280: TBitBtn;
    mesa281: TBitBtn;
    mesa282: TBitBtn;
    mesa283: TBitBtn;
    mesa284: TBitBtn;
    mesa285: TBitBtn;
    mesa286: TBitBtn;
    mesa287: TBitBtn;
    mesa288: TBitBtn;
    mesa289: TBitBtn;
    mesa290: TBitBtn;
    mesa291: TBitBtn;
    mesa292: TBitBtn;
    mesa293: TBitBtn;
    mesa294: TBitBtn;
    mesa295: TBitBtn;
    mesa296: TBitBtn;
    mesa297: TBitBtn;
    mesa298: TBitBtn;
    mesa299: TBitBtn;
    mesa300: TBitBtn;
    mesa301: TBitBtn;
    mesa302: TBitBtn;
    mesa303: TBitBtn;
    mesa304: TBitBtn;
    mesa305: TBitBtn;
    mesa306: TBitBtn;
    mesa307: TBitBtn;
    mesa308: TBitBtn;
    mesa309: TBitBtn;
    mesa310: TBitBtn;
    mesa311: TBitBtn;
    mesa312: TBitBtn;
    mesa313: TBitBtn;
    mesa314: TBitBtn;
    mesa315: TBitBtn;
    mesa316: TBitBtn;
    mesa317: TBitBtn;
    mesa318: TBitBtn;
    mesa319: TBitBtn;
    mesa320: TBitBtn;
    mesa321: TBitBtn;
    mesa322: TBitBtn;
    mesa323: TBitBtn;
    mesa324: TBitBtn;
    mesa325: TBitBtn;
    mesa326: TBitBtn;
    mesa327: TBitBtn;
    mesa328: TBitBtn;
    mesa329: TBitBtn;
    mesa330: TBitBtn;
    mesa331: TBitBtn;
    mesa332: TBitBtn;
    mesa333: TBitBtn;
    mesa334: TBitBtn;
    mesa335: TBitBtn;
    mesa336: TBitBtn;
    mesa337: TBitBtn;
    mesa338: TBitBtn;
    mesa339: TBitBtn;
    mesa340: TBitBtn;
    mesa341: TBitBtn;
    mesa342: TBitBtn;
    mesa343: TBitBtn;
    mesa344: TBitBtn;
    mesa345: TBitBtn;
    mesa346: TBitBtn;
    mesa347: TBitBtn;
    mesa348: TBitBtn;
    mesa349: TBitBtn;
    mesa350: TBitBtn;
    mesa351: TBitBtn;
    mesa352: TBitBtn;
    mesa353: TBitBtn;
    mesa354: TBitBtn;
    mesa355: TBitBtn;
    mesa356: TBitBtn;
    mesa357: TBitBtn;
    mesa358: TBitBtn;
    mesa359: TBitBtn;
    mesa360: TBitBtn;
    mesa361: TBitBtn;
    mesa362: TBitBtn;
    mesa363: TBitBtn;
    mesa364: TBitBtn;
    mesa365: TBitBtn;
    mesa366: TBitBtn;
    mesa367: TBitBtn;
    mesa368: TBitBtn;
    mesa369: TBitBtn;
    mesa370: TBitBtn;
    mesa371: TBitBtn;
    mesa372: TBitBtn;
    mesa373: TBitBtn;
    mesa374: TBitBtn;
    mesa375: TBitBtn;
    mesa376: TBitBtn;
    mesa377: TBitBtn;
    mesa378: TBitBtn;
    mesa379: TBitBtn;
    mesa380: TBitBtn;
    mesa381: TBitBtn;
    mesa382: TBitBtn;
    mesa383: TBitBtn;
    mesa384: TBitBtn;
    mesa385: TBitBtn;
    mesa386: TBitBtn;
    mesa387: TBitBtn;
    mesa388: TBitBtn;
    mesa389: TBitBtn;
    mesa390: TBitBtn;
    mesa391: TBitBtn;
    mesa392: TBitBtn;
    mesa393: TBitBtn;
    mesa394: TBitBtn;
    mesa395: TBitBtn;
    mesa396: TBitBtn;
    mesa397: TBitBtn;
    mesa398: TBitBtn;
    mesa399: TBitBtn;
    mesa400: TBitBtn;
    mesa401: TBitBtn;
    mesa402: TBitBtn;
    mesa403: TBitBtn;
    mesa404: TBitBtn;
    mesa405: TBitBtn;
    mesa406: TBitBtn;
    mesa407: TBitBtn;
    mesa408: TBitBtn;
    mesa409: TBitBtn;
    mesa410: TBitBtn;
    mesa411: TBitBtn;
    mesa412: TBitBtn;
    mesa413: TBitBtn;
    mesa414: TBitBtn;
    mesa415: TBitBtn;
    mesa416: TBitBtn;
    mesa417: TBitBtn;
    mesa418: TBitBtn;
    mesa419: TBitBtn;
    mesa420: TBitBtn;
    mesa421: TBitBtn;
    mesa422: TBitBtn;
    mesa423: TBitBtn;
    mesa424: TBitBtn;
    mesa425: TBitBtn;
    mesa426: TBitBtn;
    mesa427: TBitBtn;
    mesa428: TBitBtn;
    mesa429: TBitBtn;
    mesa430: TBitBtn;
    mesa431: TBitBtn;
    mesa432: TBitBtn;
    mesa433: TBitBtn;
    mesa434: TBitBtn;
    mesa435: TBitBtn;
    mesa436: TBitBtn;
    mesa437: TBitBtn;
    mesa438: TBitBtn;
    mesa439: TBitBtn;
    mesa440: TBitBtn;
    mesa441: TBitBtn;
    mesa442: TBitBtn;
    mesa443: TBitBtn;
    mesa444: TBitBtn;
    mesa445: TBitBtn;
    mesa446: TBitBtn;
    mesa447: TBitBtn;
    mesa448: TBitBtn;
    mesa449: TBitBtn;
    mesa450: TBitBtn;
    mesa451: TBitBtn;
    mesa452: TBitBtn;
    mesa453: TBitBtn;
    mesa454: TBitBtn;
    mesa455: TBitBtn;
    mesa456: TBitBtn;
    mesa457: TBitBtn;
    mesa458: TBitBtn;
    mesa459: TBitBtn;
    mesa460: TBitBtn;
    mesa461: TBitBtn;
    mesa462: TBitBtn;
    mesa463: TBitBtn;
    mesa464: TBitBtn;
    mesa465: TBitBtn;
    mesa466: TBitBtn;
    mesa467: TBitBtn;
    mesa468: TBitBtn;
    mesa469: TBitBtn;
    mesa470: TBitBtn;
    mesa471: TBitBtn;
    mesa472: TBitBtn;
    mesa473: TBitBtn;
    mesa474: TBitBtn;
    mesa475: TBitBtn;
    mesa476: TBitBtn;
    mesa477: TBitBtn;
    mesa478: TBitBtn;
    mesa479: TBitBtn;
    mesa480: TBitBtn;
    mesa481: TBitBtn;
    mesa482: TBitBtn;
    mesa483: TBitBtn;
    mesa484: TBitBtn;
    mesa485: TBitBtn;
    mesa486: TBitBtn;
    mesa487: TBitBtn;
    mesa488: TBitBtn;
    mesa489: TBitBtn;
    mesa490: TBitBtn;
    mesa491: TBitBtn;
    mesa492: TBitBtn;
    mesa493: TBitBtn;
    mesa494: TBitBtn;
    mesa495: TBitBtn;
    mesa496: TBitBtn;
    mesa497: TBitBtn;
    mesa498: TBitBtn;
    mesa499: TBitBtn;
    mesa500: TBitBtn;
    mesa501: TBitBtn;
    mesa502: TBitBtn;
    mesa503: TBitBtn;
    mesa504: TBitBtn;
    mesa505: TBitBtn;
    mesa506: TBitBtn;
    mesa507: TBitBtn;
    mesa508: TBitBtn;
    mesa509: TBitBtn;
    mesa510: TBitBtn;
    mesa511: TBitBtn;
    mesa512: TBitBtn;
    mesa513: TBitBtn;
    mesa514: TBitBtn;
    mesa515: TBitBtn;
    mesa516: TBitBtn;
    mesa517: TBitBtn;
    mesa518: TBitBtn;
    mesa519: TBitBtn;
    mesa520: TBitBtn;
    mesa521: TBitBtn;
    mesa522: TBitBtn;
    mesa523: TBitBtn;
    mesa524: TBitBtn;
    mesa525: TBitBtn;
    mesa526: TBitBtn;
    mesa527: TBitBtn;
    mesa528: TBitBtn;
    mesa529: TBitBtn;
    mesa530: TBitBtn;
    mesa531: TBitBtn;
    mesa532: TBitBtn;
    mesa533: TBitBtn;
    mesa534: TBitBtn;
    mesa535: TBitBtn;
    mesa536: TBitBtn;
    mesa537: TBitBtn;
    mesa538: TBitBtn;
    mesa539: TBitBtn;
    mesa540: TBitBtn;
    mesa541: TBitBtn;
    mesa542: TBitBtn;
    mesa543: TBitBtn;
    mesa544: TBitBtn;
    mesa545: TBitBtn;
    mesa546: TBitBtn;
    mesa547: TBitBtn;
    mesa548: TBitBtn;
    mesa549: TBitBtn;
    mesa550: TBitBtn;
    mesa551: TBitBtn;
    mesa552: TBitBtn;
    mesa553: TBitBtn;
    mesa554: TBitBtn;
    mesa555: TBitBtn;
    mesa556: TBitBtn;
    mesa557: TBitBtn;
    mesa558: TBitBtn;
    mesa559: TBitBtn;
    mesa560: TBitBtn;
    mesa561: TBitBtn;
    mesa562: TBitBtn;
    mesa563: TBitBtn;
    mesa564: TBitBtn;
    mesa565: TBitBtn;
    mesa566: TBitBtn;
    mesa567: TBitBtn;
    mesa568: TBitBtn;
    mesa569: TBitBtn;
    mesa570: TBitBtn;
    mesa571: TBitBtn;
    mesa572: TBitBtn;
    mesa573: TBitBtn;
    mesa574: TBitBtn;
    mesa575: TBitBtn;
    mesa576: TBitBtn;
    mesa577: TBitBtn;
    mesa578: TBitBtn;
    mesa579: TBitBtn;
    mesa580: TBitBtn;
    mesa581: TBitBtn;
    mesa582: TBitBtn;
    mesa584: TBitBtn;
    mesa583: TBitBtn;
    mesa585: TBitBtn;
    mesa586: TBitBtn;
    mesa587: TBitBtn;
    mesa588: TBitBtn;
    mesa589: TBitBtn;
    mesa590: TBitBtn;
    mesa591: TBitBtn;
    mesa592: TBitBtn;
    mesa593: TBitBtn;
    mesa594: TBitBtn;
    mesa595: TBitBtn;
    mesa596: TBitBtn;
    mesa597: TBitBtn;
    mesa598: TBitBtn;
    mesa599: TBitBtn;
    mesa600: TBitBtn;
    Label1: TLabel;
    Panel2: TPanel;
    Panel3: TPanel;
    Label2: TLabel;
    Label3: TLabel;
    lbAbertas: TLabel;
    lbAguardando: TLabel;
    BitBtn1: TBitBtn;
    procedure FormActivate(Sender: TObject);
    procedure AtualizarListaMesas();
    procedure BitBtn1Click(Sender: TObject);
    procedure FuncaoBtnClick(Sender: TObject);


  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  frmMapaMesas: TfrmMapaMesas;

implementation

uses uu_data_module, uu_caixa_restaurante, uu_frm_principal;

{$R *.dfm}

procedure TfrmMapaMesas.FormActivate(Sender: TObject);
begin
  inherited;
Self.Width:=1024;
Self.Height:=737;
Self.Top:=1;
self.Left:=1;
AtualizarListaMesas();

end;



procedure TfrmMapaMesas.AtualizarListaMesas();
var
 botao2 : TBitBtn;
 vtop, vesq : Integer;
 pt : tpoint;
 qryMontaMesas : TIBquery;
 x : integer;
 achouPonto : boolean;
 qtdMesasAbertas : integer;
 qtdMesasAguardandoPagto : integer;
begin
  qtdMesasAbertas:=0;
  qtdMesasAguardandoPagto:=0;
  dm.transacaoAuxiliar.Active:=false;
  dm.transacaoAuxiliar.Active:=true;
  qryMontaMesas:=TIBquery.create(frmMapaMesas );
  qryMontaMesas.database:=dm.dbrestaurante;
  qryMontaMesas.transaction:=dm.transacaoAuxiliar;
  qryMontaMesas.Active:=False;
  qryMontaMesas.SQL.Clear;
  qryMontaMesas.sql.add('select distinct cod_mesa from movimento_mesa where cod_mesa not in (select cod_mesa from configuracoes_estacao)');
  qryMontaMesas.Active:=true;
  qryMontaMesas.First;




  x:=0;
  achouPonto:=false;
  while ( (x < ComponentCount-1) and (achouPonto=false)) do
   begin
     if((Components[x].ClassName='TBitBtn') and (Copy(Components[x].Name,0,4) = 'mesa') ) then
      begin
        achouPonto:=true;
      end;

      if achouPonto=false then
         x:=x+1;
   end;

  while not (qryMontaMesas.Eof ) do
   begin

         if  ((Components[x].ClassName='TBitBtn') and (Copy(Components[x].Name,0,4) = 'mesa') ) then
           begin
            TBitBtn(Components[x]).Tag:=99;
            TBitBtn(Components[x]).Font.Style:=[fsbold];
            TBitBtn(Components[x]).Visible:= true;
            TBitBtn(Components[x]).Caption:= qryMontaMesas.fieldbyname('cod_mesa').value;

            TBitBtn(Components[x]).Layout := blGlyphTop;
            TBitBtn(Components[x]).Cursor := crHandPoint;
            TBitBtn(Components[x]).Hint   := qryMontaMesas.fieldbyname('cod_mesa').value;
            TBitBtn(Components[x]).ShowHint:=true;
            TBitBtn(Components[x]).Glyph.LoadFromFile(patchAplicacao+'imagens\mesa_consumindo.bmp');
            if ( dm.verificaExtratosEmitidos(TBitBtn(Components[x]).Caption) = true) then
             begin
              TBitBtn(Components[x]).Glyph.LoadFromFile(patchAplicacao+'imagens\dinheiro.bmp');
              qtdMesasAguardandoPagto:=qtdMesasAguardandoPagto+1;
             end;
           TBitBtn(Components[x]).onClick:= FuncaoBtnClick;
            qtdMesasAbertas:=qtdMesasAbertas +1;
            x:=x+1;
            qryMontaMesas.Next;
           end;
   end;

  // Coloca os botões não usados como invisíveis
  while ( (x < ComponentCount-1)) do
   begin
     if((Components[x].ClassName='TBitBtn') and (Copy(Components[x].Name,0,4) = 'mesa') ) then
     TBitBtn(Components[x]).Visible:=false;
      x:=x+1;
   end;





   pnMesas.Repaint;
   pnMesas.Refresh;
   qryMontaMesas.Active:=false;
   FreeAndNil(qryMontaMesas);


   lbAbertas.caption    :='Mesas abertas: '+IntToStr(qtdMesasAbertas);
   lbAguardando.Caption :='Aguardando Pgto: '+IntToStr(qtdMesasAguardandoPagto);
   dm.transacaoAuxiliar.Active:=false;

end;


procedure TfrmMapaMesas.BitBtn1Click(Sender: TObject);
begin
  inherited;
  close;
end;


procedure TfrmMapaMesas.FuncaoBtnClick(Sender: TObject);
begin
   string_auxiliar := (Sender as TBitBtn).Caption;
   close;

end;

end.
